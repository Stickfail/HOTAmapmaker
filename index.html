<!DOCTYPE html>
<html>

<head>
  <style>
    .grid-container {
      display: grid;
      grid-template-columns: repeat(4, minmax(32px, 32px));
      background-color: #2196F3;
      padding: 1px;
    }

    .grid-container>div {
      display: flex;
      align-items: center;
      justify-content: center;
      aspect-ratio: 1 / 1;
    }

    .d0 {
      background-color: white;
    }

    .d1 {
      background-color: black;
    }

    .d2 {
      background-color: red;
    }

    .d3 {
      background-color: green;
    }

    .d4 {
      background-color: blue;
    }
  </style>
</head>

<body>

  <h1>HOTA Map Editor</h1>

  <button type="button" onclick="resize()">Resize</button>
  <button type="button" onclick="setTileId()">Set Tile ID</button>

  <div class="grid-container" id="grid"></div>

  <button type="button" onclick="finish()">Finish</button>

  <p id="printid"></p>

  <script>
    const grid = document.getElementById("grid");
    let isDragging = false; // Track if the mouse is being dragged

     let currentTileId = "d0"; // Default class to start with

    // Function to change the tile's class (and color)
    function changeTileClass(tile) {
      tile.className = `tiles ${currentTileId}`; // Set tile to the current tile ID
    }

    function finish() {
      let final = [];

      for (let h = 0; h < y; h++) {
        let temp = [];
        for (let w = 0; w < x; w++) {
          let tile = document.getElementById(`${w}w${h}h`);
          temp.push(tile.className);
        }
        final.push(`[${temp}]`);
      }

      final = `[${final}]`;
      document.getElementById("printid").innerText = final;
    }

    let x, y;

    // Handle clicking to change tile class
    function handleClick(e) {
      if (e.target.classList.contains("tiles")) {
        changeTileClass(e.target); // Change clicked tile to the selected class
      }
    }

    // Function to set the current tile ID (class) for future clicks
    function setTileId() {
      let tileId = prompt("Enter tile ID (e.g., 'd0', 'd1', 'd2', 'd3'):");

      if (tileId) {
        currentTileId = tileId; // Set the current tile ID
      } else {
        alert("Invalid tile ID entered.");
      }
    }

    function resize() {
      x = prompt("Set x value");
      y = prompt("Set y value");

      grid.innerHTML = "";
      for (let h = 0; h < y; h++) {
        for (let w = 0; w < x; w++) {
          let space = document.createElement("div");
          space.className = "tiles d0"; // Default to d0 (white)
          space.id = `${w}w${h}h`;
          grid.appendChild(space);
        }
      }

      grid.style.gridTemplateColumns = `repeat(${x}, minmax(32px, 32px))`;
      grid.style.gridTemplateRows = `repeat(${y}, minmax(32px, 32px))`;

      // Add event listener to handle clicks
      grid.addEventListener("click", handleClick);
    }
  </script>
</body>

</html>
